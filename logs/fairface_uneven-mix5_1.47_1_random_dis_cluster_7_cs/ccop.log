
===2023-06-17 13:56:58===
===Setting===
    dataset: fairface
    lr: 0.01
    batch: 64
    iters: 10
    wk_iters: 1
    si: False
    domain_num: 7
    quantile: 0
    power_cs: 2.0
    std_rw: False
    gender_label: False
    binary_race: False
    save_iter: -1
    mix: False
    mix2: False
    mix3: False
    mix4: False
data_number=[12,17,26,38,56,82,121,179,263,387,27,40,59,86,127,187,276,43,64,94,139,205,55,81,119,102,150,172,117,]
client_nums=[10,7,5,3,2,1,1,]
len_dataset=[3952,2688,1828,856,846,575,391,]
domain number = 7
===2023-06-17 13:57:50===
===Setting===
    dataset: fairface
    lr: 0.01
    batch: 64
    iters: 50
    wk_iters: 1
    si: False
    domain_num: 7
    quantile: 0
    power_cs: 2.0
    std_rw: False
    gender_label: False
    binary_race: False
    save_iter: -1
    mix: False
    mix2: False
    mix3: False
    mix4: False
data_number=[12,17,26,38,56,82,121,179,263,387,27,40,59,86,127,187,276,43,64,94,139,205,55,81,119,102,150,172,117,]
client_nums=[10,7,5,3,2,1,1,]
len_dataset=[3952,2688,1828,856,846,575,391,]
domain number = 7
multiply 100 for Ea!
use train loss for Ea
============ Train epoch 0 ============
cnt=[1, 2, 8, 5, 3, 1, 9, ]
power_decay: 0.9, powerI: 0.9500, powerC: 0.0500
 Site-White_utk                 (6) | Train Loss: 2.1761 | Train Acc: 0.0833
 Site-White_utk                 (6) | Train Loss: 2.1909 | Train Acc: 0.1176
 Site-White_utk                 (6) | Train Loss: 2.2601 | Train Acc: 0.1154
 Site-White_utk                 (6) | Train Loss: 2.2837 | Train Acc: 0.0789
 Site-White_utk                 (6) | Train Loss: 2.2517 | Train Acc: 0.0893
 Site-White_utk                 (0) | Train Loss: 2.2240 | Train Acc: 0.1220
 Site-White_utk                 (6) | Train Loss: 2.1970 | Train Acc: 0.1240
 Site-White_utk                 (6) | Train Loss: 2.2112 | Train Acc: 0.1117
 Site-White_utk                 (6) | Train Loss: 2.2413 | Train Acc: 0.0989
 Site-White_utk                 (6) | Train Loss: 2.2070 | Train Acc: 0.1137
 Site-East_Asian                (2) | Train Loss: 1.8888 | Train Acc: 0.4074
 Site-East_Asian                (5) | Train Loss: 1.9343 | Train Acc: 0.4750
 Site-East_Asian                (2) | Train Loss: 1.9612 | Train Acc: 0.3559
 Site-East_Asian                (2) | Train Loss: 1.9455 | Train Acc: 0.3488
 Site-East_Asian                (2) | Train Loss: 1.9404 | Train Acc: 0.3780
 Site-East_Asian                (2) | Train Loss: 1.9626 | Train Acc: 0.3690
 Site-East_Asian                (2) | Train Loss: 1.8949 | Train Acc: 0.4058
 Site-Indian_utk                (3) | Train Loss: 2.0289 | Train Acc: 0.3488
 Site-Indian_utk                (3) | Train Loss: 1.9271 | Train Acc: 0.4062
 Site-Indian_utk                (3) | Train Loss: 2.0081 | Train Acc: 0.3191
 Site-Indian_utk                (3) | Train Loss: 1.9711 | Train Acc: 0.3453
 Site-Indian_utk                (3) | Train Loss: 2.0196 | Train Acc: 0.3415
 Site-Black_utk                 (4) | Train Loss: 1.9795 | Train Acc: 0.3273
 Site-Black_utk                 (4) | Train Loss: 1.9892 | Train Acc: 0.3210
 Site-Black_utk                 (4) | Train Loss: 2.0220 | Train Acc: 0.2689
 Site-Southeast_Asian           (2) | Train Loss: 2.0349 | Train Acc: 0.3431
 Site-Southeast_Asian           (2) | Train Loss: 2.0530 | Train Acc: 0.3000
 Site-Asian_ffhq                (1) | Train Loss: 1.5984 | Train Acc: 0.8256
 Site-Latino_Hispanic_ffhq      (1) | Train Loss: 1.6316 | Train Acc: 0.6838
Average Train Accuracy: 0.2974
 Site-White_utk                 (6) | Val  Loss: 2.1877 | Val  Acc: 0.1250
 Site-White_utk                 (6) | Val  Loss: 2.2777 | Val  Acc: 0.0909
 Site-White_utk                 (6) | Val  Loss: 2.2092 | Val  Acc: 0.1176
 Site-White_utk                 (6) | Val  Loss: 2.2247 | Val  Acc: 0.1600
 Site-White_utk                 (6) | Val  Loss: 2.2163 | Val  Acc: 0.1081
 Site-White_utk                 (0) | Val  Loss: 2.1783 | Val  Acc: 0.0909
 Site-White_utk                 (6) | Val  Loss: 2.1890 | Val  Acc: 0.0988
 Site-White_utk                 (6) | Val  Loss: 2.2264 | Val  Acc: 0.1008
 Site-White_utk                 (6) | Val  Loss: 2.2135 | Val  Acc: 0.1029
 Site-White_utk                 (6) | Val  Loss: 2.3066 | Val  Acc: 0.1085
 Site-East_Asian                (2) | Val  Loss: 2.1040 | Val  Acc: 0.1667
 Site-East_Asian                (5) | Val  Loss: 1.9443 | Val  Acc: 0.3846
 Site-East_Asian                (2) | Val  Loss: 1.9497 | Val  Acc: 0.3846
 Site-East_Asian                (2) | Val  Loss: 1.9214 | Val  Acc: 0.4035
 Site-East_Asian                (2) | Val  Loss: 1.9408 | Val  Acc: 0.4235
 Site-East_Asian                (2) | Val  Loss: 1.9044 | Val  Acc: 0.4000
 Site-East_Asian                (2) | Val  Loss: 1.9288 | Val  Acc: 0.3859
 Site-Indian_utk                (3) | Val  Loss: 1.9767 | Val  Acc: 0.3793
 Site-Indian_utk                (3) | Val  Loss: 2.0162 | Val  Acc: 0.3256
 Site-Indian_utk                (3) | Val  Loss: 1.9967 | Val  Acc: 0.3651
 Site-Indian_utk                (3) | Val  Loss: 2.0298 | Val  Acc: 0.3043
 Site-Indian_utk                (3) | Val  Loss: 1.9048 | Val  Acc: 0.3603
 Site-Black_utk                 (4) | Val  Loss: 1.9998 | Val  Acc: 0.3333
 Site-Black_utk                 (4) | Val  Loss: 1.9846 | Val  Acc: 0.3148
 Site-Black_utk                 (4) | Val  Loss: 1.9636 | Val  Acc: 0.3291
 Site-Southeast_Asian           (2) | Val  Loss: 2.2236 | Val  Acc: 0.2794
 Site-Southeast_Asian           (2) | Val  Loss: 2.0590 | Val  Acc: 0.3100
 Site-Asian_ffhq                (1) | Val  Loss: 1.5924 | Val  Acc: 0.7826
 Site-Latino_Hispanic_ffhq      (1) | Val  Loss: 1.8202 | Val  Acc: 0.2179
Average Valid Accuracy: 0.2743
 Best site-White_utk                (6)  | Epoch:0 | Val Acc: 0.1250
 Best site-White_utk                (6)  | Epoch:0 | Val Acc: 0.0909
 Best site-White_utk                (6)  | Epoch:0 | Val Acc: 0.1176
 Best site-White_utk                (6)  | Epoch:0 | Val Acc: 0.1600
 Best site-White_utk                (6)  | Epoch:0 | Val Acc: 0.1081
 Best site-White_utk                (0)  | Epoch:0 | Val Acc: 0.0909
 Best site-White_utk                (6)  | Epoch:0 | Val Acc: 0.0988
 Best site-White_utk                (6)  | Epoch:0 | Val Acc: 0.1008
 Best site-White_utk                (6)  | Epoch:0 | Val Acc: 0.1029
 Best site-White_utk                (6)  | Epoch:0 | Val Acc: 0.1085
 Best site-East_Asian               (2)  | Epoch:0 | Val Acc: 0.1667
 Best site-East_Asian               (5)  | Epoch:0 | Val Acc: 0.3846
 Best site-East_Asian               (2)  | Epoch:0 | Val Acc: 0.3846
 Best site-East_Asian               (2)  | Epoch:0 | Val Acc: 0.4035
 Best site-East_Asian               (2)  | Epoch:0 | Val Acc: 0.4235
 Best site-East_Asian               (2)  | Epoch:0 | Val Acc: 0.4000
 Best site-East_Asian               (2)  | Epoch:0 | Val Acc: 0.3859
 Best site-Indian_utk               (3)  | Epoch:0 | Val Acc: 0.3793
 Best site-Indian_utk               (3)  | Epoch:0 | Val Acc: 0.3256
 Best site-Indian_utk               (3)  | Epoch:0 | Val Acc: 0.3651
 Best site-Indian_utk               (3)  | Epoch:0 | Val Acc: 0.3043
 Best site-Indian_utk               (3)  | Epoch:0 | Val Acc: 0.3603
 Best site-Black_utk                (4)  | Epoch:0 | Val Acc: 0.3333
 Best site-Black_utk                (4)  | Epoch:0 | Val Acc: 0.3148
 Best site-Black_utk                (4)  | Epoch:0 | Val Acc: 0.3291
 Best site-Southeast_Asian          (2)  | Epoch:0 | Val Acc: 0.2794
 Best site-Southeast_Asian          (2)  | Epoch:0 | Val Acc: 0.3100
 Best site-Asian_ffhq               (1)  | Epoch:0 | Val Acc: 0.7826
 Best site-Latino_Hispanic_ffhq     (1)  | Epoch:0 | Val Acc: 0.2179
 Saving the gmap checkpoint to ../checkpoint/fed_fairface_uneven-mix5_1.47_1_random_dis_cluster_7_cs/ccop_q=1_pcs=2.0_gmap...
 Saving the local and server checkpoint to ../checkpoint/fed_fairface_uneven-mix5_1.47_1_random_dis_cluster_7_cs/ccop_q=1_pcs=2.0...
============ Train epoch 1 ============
cnt=[1, 2, 5, 9, 3, 7, 2, ]
power_decay: 0.9, powerI: 0.9050, powerC: 0.0950
 Site-White_utk                 (0) | Train Loss: 1.9005 | Train Acc: 0.1667
 Site-White_utk                 (3) | Train Loss: 2.1291 | Train Acc: 0.1765
 Site-White_utk                 (3) | Train Loss: 2.1423 | Train Acc: 0.1154
 Site-White_utk                 (3) | Train Loss: 2.1979 | Train Acc: 0.1053
 Site-White_utk                 (3) | Train Loss: 2.1497 | Train Acc: 0.1250
 Site-White_utk                 (3) | Train Loss: 2.1426 | Train Acc: 0.1341
 Site-White_utk                 (3) | Train Loss: 2.1142 | Train Acc: 0.1405
 Site-White_utk                 (3) | Train Loss: 2.1286 | Train Acc: 0.1341
 Site-White_utk                 (3) | Train Loss: 2.0839 | Train Acc: 0.1445
 Site-White_utk                 (3) | Train Loss: 2.1495 | Train Acc: 0.1525
 Site-East_Asian                (5) | Train Loss: 1.8577 | Train Acc: 0.4074
 Site-East_Asian                (5) | Train Loss: 1.9243 | Train Acc: 0.4500
 Site-East_Asian                (5) | Train Loss: 1.9445 | Train Acc: 0.3559
 Site-East_Asian                (5) | Train Loss: 2.0279 | Train Acc: 0.3372
 Site-East_Asian                (5) | Train Loss: 1.9465 | Train Acc: 0.3780
 Site-East_Asian                (5) | Train Loss: 1.9549 | Train Acc: 0.3369
 Site-East_Asian                (5) | Train Loss: 1.9180 | Train Acc: 0.3768
 Site-Indian_utk                (2) | Train Loss: 1.9894 | Train Acc: 0.2791
 Site-Indian_utk                (2) | Train Loss: 1.9374 | Train Acc: 0.4375
 Site-Indian_utk                (2) | Train Loss: 1.9806 | Train Acc: 0.3085
 Site-Indian_utk                (2) | Train Loss: 1.9366 | Train Acc: 0.3309
 Site-Indian_utk                (2) | Train Loss: 1.9690 | Train Acc: 0.3073
 Site-Black_utk                 (4) | Train Loss: 1.9524 | Train Acc: 0.3636
 Site-Black_utk                 (4) | Train Loss: 2.0048 | Train Acc: 0.2469
 Site-Black_utk                 (4) | Train Loss: 2.0018 | Train Acc: 0.2857
 Site-Southeast_Asian           (1) | Train Loss: 1.9968 | Train Acc: 0.3431
 Site-Southeast_Asian           (1) | Train Loss: 2.0250 | Train Acc: 0.2600
 Site-Asian_ffhq                (6) | Train Loss: 1.6858 | Train Acc: 0.7733
 Site-Latino_Hispanic_ffhq      (6) | Train Loss: 1.7264 | Train Acc: 0.6581
Average Train Accuracy: 0.2976
 Site-White_utk                 (0) | Val  Loss: 2.0755 | Val  Acc: 0.2500
 Site-White_utk                 (3) | Val  Loss: 2.1026 | Val  Acc: 0.1818
 Site-White_utk                 (3) | Val  Loss: 2.0866 | Val  Acc: 0.1176
 Site-White_utk                 (3) | Val  Loss: 2.1494 | Val  Acc: 0.1200
 Site-White_utk                 (3) | Val  Loss: 2.1129 | Val  Acc: 0.1081
 Site-White_utk                 (3) | Val  Loss: 2.1093 | Val  Acc: 0.0909
 Site-White_utk                 (3) | Val  Loss: 2.1231 | Val  Acc: 0.1235
 Site-White_utk                 (3) | Val  Loss: 2.1418 | Val  Acc: 0.1176
 Site-White_utk                 (3) | Val  Loss: 2.1249 | Val  Acc: 0.1371
 Site-White_utk                 (3) | Val  Loss: 2.1767 | Val  Acc: 0.1512
 Site-East_Asian                (5) | Val  Loss: 2.0629 | Val  Acc: 0.2222
 Site-East_Asian                (5) | Val  Loss: 1.9506 | Val  Acc: 0.3462
 Site-East_Asian                (5) | Val  Loss: 1.9715 | Val  Acc: 0.3333
 Site-East_Asian                (5) | Val  Loss: 1.9435 | Val  Acc: 0.3509
 Site-East_Asian                (5) | Val  Loss: 1.9694 | Val  Acc: 0.3765
 Site-East_Asian                (5) | Val  Loss: 1.9154 | Val  Acc: 0.3840
 Site-East_Asian                (5) | Val  Loss: 1.9321 | Val  Acc: 0.3967
 Site-Indian_utk                (2) | Val  Loss: 1.9632 | Val  Acc: 0.3103
 Site-Indian_utk                (2) | Val  Loss: 1.9608 | Val  Acc: 0.3023
 Site-Indian_utk                (2) | Val  Loss: 1.9694 | Val  Acc: 0.3810
 Site-Indian_utk                (2) | Val  Loss: 1.9671 | Val  Acc: 0.3152
 Site-Indian_utk                (2) | Val  Loss: 1.9247 | Val  Acc: 0.3088
 Site-Black_utk                 (4) | Val  Loss: 1.9936 | Val  Acc: 0.3889
 Site-Black_utk                 (4) | Val  Loss: 1.9998 | Val  Acc: 0.2407
 Site-Black_utk                 (4) | Val  Loss: 1.9677 | Val  Acc: 0.3038
 Site-Southeast_Asian           (1) | Val  Loss: 2.1371 | Val  Acc: 0.2794
 Site-Southeast_Asian           (1) | Val  Loss: 2.0517 | Val  Acc: 0.2900
 Site-Asian_ffhq                (6) | Val  Loss: 1.7022 | Val  Acc: 0.7130
 Site-Latino_Hispanic_ffhq      (6) | Val  Loss: 1.8359 | Val  Acc: 0.2436
Average Valid Accuracy: 0.2719
============ Train epoch 2 ============
